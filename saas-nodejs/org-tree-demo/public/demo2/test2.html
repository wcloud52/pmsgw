<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9" />
	<title>树形脉络图</title>
	<meta name="description" content="树形脉络图">
	<meta name="keyword" content="树形脉络图">


	<script src="js/jquery.js"></script>

	<script type="text/javascript" src="js/jtopo-min.js"></script>

	<script type="text/javascript" src="test.js"></script>

	<script>
		
		$(document).ready(function () {

			var  offCanvas = document.getElementById('canvas');//document.createElement("canvas");//离屏canvas 通过代码创建出来的
			offCanvas.width=800;
			  offCanvas.height=800;
			  
				var stage = new JTopo.Stage(offCanvas);

			
			
			  var scene = new JTopo.Scene(stage);    
              scene.background = 'js/bg.jpg';
			  stage.add(scene);

			  var cloudNode = new JTopo.Node('root');
            cloudNode.setSize(30, 26);
            cloudNode.setLocation(360,230);            
            cloudNode.layout = {type: 'circle', radius: 150};
            
            scene.add(cloudNode);
            
            for(var i=1; i<4; i++){
                var node = new JTopo.CircleNode('host' + i);
                node.fillStyle = '200,255,0';
                node.radius = 15;
                node.setLocation(scene.width * Math.random(), scene.height * Math.random());
                node.layout = {type: 'circle', radius: 80};
                
                scene.add(node);                                
                var link = new JTopo.Link(cloudNode, node);
                scene.add(link);
                
                for(var j=0; j<6; j++){
                    var vmNode = new JTopo.CircleNode('vm-' + i + '-' + j);
                    vmNode.radius = 10;
                    vmNode.fillStyle = '255,255,0';
                    vmNode.setLocation(scene.width * Math.random(), scene.height * Math.random());
                    scene.add(vmNode);                                
                    scene.add(new JTopo.Link(node, vmNode));                            
                }
            }
			JTopo.layout.layoutNode(scene, cloudNode, true);
			
			  
			$('#btnShow').click(function(){
				//var canvas = document.getElementById('canvas');

				
				var canvas = document.getElementById('canvas');
			  var ctx = canvas.getContext("2d");
			  setInterval(function() {
                ctx.clearRect(0, 0, 400, 400);
                ctx.drawImage(offCanvas, 0, 0,200,200,0,0,200,200);
      
               });
			  
	
		   });
		   
		   
		   $('#btnMove').click(function(){
			   
			 var canvas = document.getElementById('canvas');
			  var ctx = canvas.getContext("2d");
			  setInterval(function() {
                ctx.clearRect(0, 0, 400, 400);
                ctx.drawImage(offCanvas, 0, 0,200,200,0,0,200,200);
      
			   });
			   
		   });
		   

		});


	</script>
</head>

<body>

	<center>
		<div class="wrap_div">
			<div class="head_nav">
				<input type="button" id="btnShow" value="显示">
				<input type="button" id="btnClear" value="清除">
				<input type="button" id="btnMove" value="移动">
			</div>
			<div class="head_nav_second">
				<ul class="menu" id="nav_menu">

				</ul>
			</div>
			<div class="content">
				<div class="left">
					<ul id="menu">

					</ul>
				</div>
				<div class="right">
					<div id="content">
						<canvas width="400" height="400" id="canvas"></canvas>

					</div>
				</div>
				<div class="clear"></div>
			</div>
		</div>
	</center>
	<div class="footer">
		&nbsp;
	</div>

</body>

</html>